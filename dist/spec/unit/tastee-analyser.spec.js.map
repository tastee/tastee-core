{"version":3,"sources":["spec/unit/tastee-analyser.spec.ts"],"names":[],"mappings":";AAAA,uCAAuC;;AAEvC,8BAA8B;AAE9B,+DAAyD;AAEzD,QAAQ,CAAC,iBAAiB,EAAE;IAExB,IAAI,QAAyB,CAAC;IAC9B,IAAI,cAAc,GAAG,KAAK,CAAC;IAE3B,UAAU,CAAC,CAAC,IAAI,EAAE,EAAE;QAChB,QAAQ,GAAG,IAAI,gCAAc,EAAE,CAAC;QAChC,QAAQ,CAAC,aAAa,CAAC,4CAA4C,EAAE;YACjE,QAAQ,CAAC,aAAa,CAAC,mCAAmC,EAAE,GAAG,EAAE;gBAC7D,cAAc,GAAG,IAAI,CAAC;gBACtB,IAAI,EAAE,CAAC;YACX,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,YAAY,CAAC,8CAA8C,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,GAAG,EAAE;QAC5C,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2DAA2D,EAAE;QAC5D,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC/D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,8DAA8D,EAAE;QAC/D,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;IACtF,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,gDAAgD,EAAE;QACjD,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,8BAA8B,CAAC,CAAC,CAAC;QACvE,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACpC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;QAC3E,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iDAAiD,EAAE;QAClD,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,4CAA4C,CAAC,CAAC,CAAC;QACrF,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,0IAA0I,CAAC,CAAC;IACrL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,4BAA4B,EAAE;QAC7B,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,gDAAgD,CAAC,CAAC,CAAC;QACzF,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,0IAA0I,CAAC,CAAC;IACrL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oEAAoE,EAAE;QACrE,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC;QACrE,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,kEAAkE,CAAC,CAAC;IAC7G,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oEAAoE,EAAE;QACrE,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,gDAAgD,CAAC,CAAC,CAAC;QACzF,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,0IAA0I,CAAC,CAAC;IACrL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iDAAiD,EAAE;QAClD,4CAA4C;QAC5C,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAC5D,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;IAC/E,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,gEAAgE,EAAE;QACjE,4CAA4C;QAC5C,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,mCAAmC,CAAC,CAAC,CAAC;QAC5E,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;IAC/E,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,0CAA0C,EAAE;QAC3C,4CAA4C;QAC5C,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC;QACnE,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,sDAAsD,CAAC,CAAC;IACjG,CAAC,CAAC,CAAC;IAGH,EAAE,CAAC,+BAA+B,EAAE;QAChC,8CAA8C;QAC9C,IAAI,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAC9D,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnD,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","file":"tastee-analyser.spec.js","sourcesContent":["/* tslint:disable:no-unused-variable */\n\n////////  SPECS  /////////////\n\nimport {TasteeAnalyser} from \"../../app/tastee-analyser\";\n\ndescribe('Tastee Analyser', function () {\n\n    let analyser : TasteeAnalyser;\n    let callbackCalled = false;\n\n    beforeEach((done) => {\n        analyser = new TasteeAnalyser();\n        analyser.addPluginFile('./src/spec/examples/test-instructions.yaml', function(){\n            analyser.addPluginFile('./plugin/common-instructions.yaml', () => {\n                callbackCalled = true;\n                done();\n            });\n        });\n\n        analyser.addParamFile('./src/spec/examples/my-parameters.properties');\n    });\n\n    it('manages call back after plugin added', () => {\n        expect(callbackCalled).toBe(true);\n    });\n\n    it(\"Add tastee code file as plugin - go to - verify paramters\", function() {\n        expect(analyser.tasteeCodes[4].parameters[0]).toBe('$url');\n    });\n\n    it(\"Add tastee code file as plugin - click on - verify codeLines\", function() {\n        expect(analyser.tasteeCodes[5].codeLines[0]).toBe('page.waitForSelector($name);');\n    });\n\n    it(\"Translate tastee code to selenium code - go to\", function() {\n        var instructions = analyser.toJsCode([\"go to 'http://www.google.fr'\"]);\n        expect(instructions.length).toBe(1);\n        expect(instructions[0].command).toBe(\"page.goto('http://www.google.fr');\");\n        expect(instructions[0].tasteeLine).toBe(\"go to 'http://www.google.fr'\");\n    });\n\n    it(\"Translate tastee code to selenium code - verify\", function() {\n        var instructions = analyser.toJsCode([\"check that 'myField' is equal to 'myValue'\"]);\n        expect(instructions[0].command).toBe(\"page.$eval('myField', e => e.innerHTML).then(html => { assert.equal(html, 'myValue', 'the '+ 'myField' + ' element contains '+html); });\");\n    });\n\n    it(\"Translate using parameters\", function() {\n        var instructions = analyser.toJsCode(['check that param.field is equal to param.value']);\n        expect(instructions[0].command).toBe(\"page.$eval('myField', e => e.innerHTML).then(html => { assert.equal(html, 'myValue', 'the '+ 'myField' + ' element contains '+html); });\");\n    });\n\n    it(\"manage multiple occurences of function parameters when translating\", function() {\n        var instructions = analyser.toJsCode([\"log some 'thisValue' twice\"]);\n        expect(instructions[0].command).toBe(\"console.log('log once '+'thisValue'+', and twice '+'thisValue');\");\n    });\n\n    it(\"manage multiple occurences of external parameters when translating\", function() {\n        var instructions = analyser.toJsCode(['check that param.field is equal to param.field']);\n        expect(instructions[0].command).toBe(\"page.$eval('myField', e => e.innerHTML).then(html => { assert.equal(html, 'myField', 'the '+ 'myField' + ' element contains '+html); });\");\n    });\n\n    it(\"manages intructions that call other instruction\", function() {\n        //see ./spec/examples/test-instructions.yaml\n        var instructions = analyser.toJsCode(['call go to google']);\n        expect(instructions[0].command).toBe(\"page.goto('http://www.google.fr');\");\n    });\n\n    it(\"manages intructions that call other instruction and parameters\", function() {\n        //see ./spec/examples/test-instructions.yaml\n        var instructions = analyser.toJsCode([\"call go to 'http://www.google.fr'\"]);\n        expect(instructions[0].command).toBe(\"page.goto('http://www.google.fr');\");\n    });\n\n    it(\"manages intructions that call parameters\", function() {\n        //see ./spec/examples/test-instructions.yaml\n        var instructions = analyser.toJsCode([\"visit selenium wikipedia\"]);\n        expect(instructions[0].command).toBe(\"page.goto('https://en.wikipedia.org/wiki/Selenium');\");\n    });\n\n\n    it(\"do not mix similar parameters\", function() {\n        //see ./spec/examples/my-parameters.properties\n        var instructions = analyser.toJsCode([\"complete.first.task\"]);\n        expect(instructions[0].command).toBe(\"'good'\");\n    });\n});"]}